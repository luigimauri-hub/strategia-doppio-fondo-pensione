<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5, user-scalable=yes">
    <title>Strategia del Doppio Fondo Pensione - Calcolatore</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
        }
        
        body {
            background: linear-gradient(135deg, #0b4f6c 0%, #1d7a8c 100%);
            margin: 0;
            padding: 12px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            max-width: 1400px;
            width: 100%;
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.25);
        }
        
        h1 {
            color: #0b4f6c;
            margin-top: 0;
            text-align: center;
            font-size: 1.8em;
            border-bottom: 3px solid #1d7a8c;
            padding-bottom: 12px;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-top: -5px;
            margin-bottom: 20px;
            font-size: 0.95em;
            line-height: 1.4;
            padding: 0 5px;
        }
        
        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-top: 20px;
        }
        
        @media (max-width: 992px) {
            .grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            h1 {
                font-size: 1.6em;
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding: 8px;
            }
            
            .container {
                padding: 15px;
                border-radius: 16px;
            }
            
            h1 {
                font-size: 1.4em;
                padding-bottom: 10px;
            }
            
            .subtitle {
                font-size: 0.85em;
                margin-bottom: 15px;
            }
        }
        
        .input-panel {
            background: #f8fafc;
            padding: 25px;
            border-radius: 18px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.05);
            border: 1px solid #e9ecef;
        }
        
        @media (max-width: 480px) {
            .input-panel {
                padding: 18px;
            }
        }
        
        .result-panel {
            background: linear-gradient(145deg, #0b4f6c 0%, #1d7a8c 100%);
            padding: 25px;
            border-radius: 18px;
            color: white;
            box-shadow: 0 12px 25px rgba(11,79,108,0.3);
        }
        
        @media (max-width: 480px) {
            .result-panel {
                padding: 18px;
            }
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        @media (max-width: 480px) {
            .form-group {
                margin-bottom: 16px;
            }
        }
        
        label {
            display: block;
            margin-bottom: 6px;
            font-weight: 700;
            color: #2c3e50;
            font-size: 0.85em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        @media (max-width: 480px) {
            label {
                font-size: 0.8em;
                margin-bottom: 4px;
            }
        }
        
        input, select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1em;
            transition: all 0.3s;
            background: white;
            -webkit-appearance: none;
            appearance: none;
        }
        
        @media (max-width: 480px) {
            input, select {
                padding: 12px 14px;
                font-size: 16px; /* Previene zoom automatico su iOS */
            }
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #1d7a8c;
            box-shadow: 0 0 0 3px rgba(29,122,140,0.1);
        }
        
        .input-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .input-group input {
            flex: 1;
        }
        
        .input-group span {
            background: #e9ecef;
            padding: 12px 16px;
            border-radius: 10px;
            color: #2c3e50;
            font-weight: 700;
            font-size: 0.9em;
            white-space: nowrap;
        }
        
        @media (max-width: 480px) {
            .input-group {
                gap: 8px;
            }
            
            .input-group span {
                padding: 12px 12px;
                font-size: 0.85em;
            }
        }
        
        .fondo-attuale-box {
            background: linear-gradient(145deg, #fff3e0, #ffe0b2);
            padding: 18px;
            border-radius: 14px;
            margin: 18px 0;
            border: 2px solid #ff9800;
            box-shadow: 0 5px 0 #e65100;
        }
        
        @media (max-width: 480px) {
            .fondo-attuale-box {
                padding: 16px;
                margin: 16px 0;
            }
        }
        
        .fondo-attuale-title {
            color: #e65100;
            font-size: 1em;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 12px;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 8px;
        }
        
        .secondo-fondo-box {
            background: linear-gradient(145deg, #e0e7ff, #c7d2fe);
            padding: 20px;
            border-radius: 16px;
            margin: 20px 0;
            border: 2px solid #4f46e5;
            box-shadow: 0 6px 0 #3730a3;
        }
        
        @media (max-width: 480px) {
            .secondo-fondo-box {
                padding: 16px;
                margin: 16px 0;
            }
        }
        
        .secondo-fondo-title {
            color: #3730a3;
            font-size: 1.1em;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 16px;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 10px;
        }
        
        .parametri-aggressivo {
            background: white;
            padding: 16px;
            border-radius: 14px;
            margin-bottom: 16px;
            border: 1px solid #4f46e5;
        }
        
        .parametri-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-top: 12px;
        }
        
        @media (max-width: 480px) {
            .parametri-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }
        }
        
        .parametro-item {
            display: flex;
            flex-direction: column;
        }
        
        .parametro-label {
            font-size: 0.75em;
            font-weight: 600;
            color: #3730a3;
            text-transform: uppercase;
            margin-bottom: 4px;
        }
        
        .parametro-input {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .parametro-input input {
            flex: 1;
            padding: 10px 12px;
            border: 2px solid #e0e7ff;
            border-radius: 8px;
            font-size: 0.95em;
        }
        
        .parametro-input span {
            background: #4f46e5;
            color: white;
            padding: 10px 12px;
            border-radius: 8px;
            font-weight: 700;
            font-size: 0.9em;
        }
        
        .default-badge {
            background: #16a34a;
            color: white;
            padding: 2px 8px;
            border-radius: 20px;
            font-size: 0.65em;
            font-weight: 700;
            text-transform: uppercase;
            margin-left: 8px;
            display: inline-block;
            white-space: nowrap;
        }
        
        @media (max-width: 480px) {
            .default-badge {
                font-size: 0.6em;
                padding: 2px 6px;
            }
        }
        
        .button {
            width: 100%;
            padding: 16px;
            background: linear-gradient(145deg, #28a745, #20c997);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 16px;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            box-shadow: 0 8px 16px rgba(40,167,69,0.2);
            -webkit-tap-highlight-color: transparent;
        }
        
        @media (max-width: 480px) {
            .button {
                padding: 14px;
                font-size: 1em;
                letter-spacing: 1px;
            }
        }
        
        .button:hover {
            background: linear-gradient(145deg, #20c997, #28a745);
            transform: translateY(-2px);
            box-shadow: 0 12px 20px rgba(40,167,69,0.3);
        }
        
        .button:active {
            transform: translateY(0);
        }
        
        .tooltip-info {
            background: #e1f5fe;
            padding: 18px;
            border-radius: 14px;
            margin-bottom: 20px;
            color: #01579b;
            font-size: 0.9em;
            border-left: 6px solid #0288d1;
            line-height: 1.5;
        }
        
        @media (max-width: 480px) {
            .tooltip-info {
                padding: 16px;
                font-size: 0.85em;
                line-height: 1.4;
            }
        }
        
        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 30px;
            font-size: 0.75em;
            font-weight: 700;
            background: rgba(255,255,255,0.2);
            color: white;
            text-transform: uppercase;
            letter-spacing: 1px;
            white-space: nowrap;
        }
        
        @media (max-width: 480px) {
            .badge {
                padding: 3px 8px;
                font-size: 0.7em;
            }
        }
        
        .deduzione-box {
            background: linear-gradient(145deg, #e8f4f8, #d1e7f0);
            padding: 20px;
            border-radius: 16px;
            margin: 20px 0;
            border: 2px solid #0b4f6c;
            box-shadow: 0 6px 0 #0b4f6c;
        }
        
        @media (max-width: 480px) {
            .deduzione-box {
                padding: 16px;
                margin: 16px 0;
            }
        }
        
        .deduzione-title {
            color: #0b4f6c;
            font-size: 1.1em;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 16px;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 10px;
        }
        
        .deduzione-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid rgba(11,79,108,0.2);
            font-size: 0.95em;
        }
        
        @media (max-width: 480px) {
            .deduzione-row {
                font-size: 0.9em;
                padding: 8px 0;
            }
        }
        
        .deduzione-importo {
            font-size: 1.1em;
            font-weight: 700;
            color: #0b4f6c;
        }
        
        .deduzione-massimale {
            background: white;
            padding: 12px;
            border-radius: 10px;
            margin-top: 12px;
            border-left: 6px solid #ffc107;
        }
        
        .deduzione-differenza {
            background: #0b4f6c;
            color: white;
            padding: 14px;
            border-radius: 10px;
            margin-top: 16px;
            font-size: 1em;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        @media (max-width: 480px) {
            .deduzione-differenza {
                flex-direction: column;
                text-align: center;
                padding: 12px;
            }
        }
        
        .differenza-positiva {
            color: #ffd966;
            font-size: 1.2em;
            font-weight: 800;
        }
        
        .differenza-negativa {
            color: #ff8a8a;
            font-size: 1.2em;
            font-weight: 800;
        }
        
        .highlight {
            background: rgba(255,255,255,0.15);
            padding: 20px;
            border-radius: 16px;
            margin: 20px 0;
            text-align: center;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        @media (max-width: 480px) {
            .highlight {
                padding: 16px;
                margin: 16px 0;
            }
        }
        
        .highlight .montante {
            font-size: 2.2em;
            font-weight: 800;
            color: #ffd966;
            line-height: 1.2;
            margin: 8px 0;
            text-shadow: 0 2px 8px rgba(0,0,0,0.2);
            word-break: break-word;
        }
        
        @media (max-width: 480px) {
            .highlight .montante {
                font-size: 1.8em;
            }
        }
        
        .result-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 14px;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.15);
            font-size: 0.95em;
            flex-wrap: wrap;
            gap: 5px;
        }
        
        @media (max-width: 480px) {
            .result-item {
                font-size: 0.9em;
                padding: 8px 0;
            }
        }
        
        .result-value {
            font-size: 1.2em;
            font-weight: 700;
            color: #ffd966;
            word-break: break-word;
        }
        
        @media (max-width: 480px) {
            .result-value {
                font-size: 1.1em;
            }
        }
        
        .capitale-ripartizione {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 12px;
        }
        
        @media (max-width: 480px) {
            .capitale-ripartizione {
                grid-template-columns: 1fr;
                gap: 10px;
            }
        }
        
        .capitale-box {
            background: rgba(255,255,255,0.1);
            padding: 12px;
            border-radius: 10px;
            text-align: center;
        }
        
        .capitale-valore {
            font-size: 1.2em;
            font-weight: 700;
            color: #ffd966;
            word-break: break-word;
        }
        
        @media (max-width: 480px) {
            .capitale-valore {
                font-size: 1.1em;
            }
        }
        
        .secondo-fondo-bottom {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 4px solid #4f46e5;
            background: white;
            border-radius: 18px;
            padding: 20px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.05);
        }
        
        @media (max-width: 480px) {
            .secondo-fondo-bottom {
                margin-top: 25px;
                padding: 16px;
            }
        }
        
        .secondo-fondo-bottom-title {
            color: #3730a3;
            font-size: 1.5em;
            font-weight: 800;
            margin-bottom: 20px;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 12px;
            border-bottom: 3px solid #4f46e5;
            padding-bottom: 12px;
        }
        
        @media (max-width: 480px) {
            .secondo-fondo-bottom-title {
                font-size: 1.3em;
                gap: 8px;
            }
        }
        
        .come-funziona-grande {
            font-size: 1.2em;
            font-weight: 700;
            color: #3730a3;
            text-align: center;
            padding: 16px;
            background: linear-gradient(145deg, #f0f3ff, #e0e7ff);
            border-radius: 14px;
            margin-bottom: 20px;
            border: 2px dashed #4f46e5;
            line-height: 1.4;
        }
        
        @media (max-width: 480px) {
            .come-funziona-grande {
                font-size: 1em;
                padding: 14px;
            }
        }
        
        .importi-simulati-box {
            margin-top: 30px;
            padding: 25px;
            background: linear-gradient(145deg, #f8fafc, #e9ecef);
            border-radius: 18px;
            border: 2px solid #0b4f6c;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }
        
        @media (max-width: 480px) {
            .importi-simulati-box {
                margin-top: 25px;
                padding: 18px;
            }
        }
        
        .importi-simulati-title {
            color: #0b4f6c;
            font-size: 1.5em;
            font-weight: 800;
            margin-bottom: 20px;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 12px;
            border-bottom: 3px solid #0b4f6c;
            padding-bottom: 12px;
        }
        
        @media (max-width: 480px) {
            .importi-simulati-title {
                font-size: 1.3em;
                gap: 8px;
            }
        }
        
        .importi-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        @media (max-width: 640px) {
            .importi-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }
        }
        
        .importi-card {
            background: white;
            padding: 20px;
            border-radius: 16px;
            box-shadow: 0 6px 0 #0b4f6c;
            border: 2px solid #0b4f6c;
            text-align: center;
        }
        
        @media (max-width: 480px) {
            .importi-card {
                padding: 16px;
            }
        }
        
        .importi-card-secondo {
            border-color: #4f46e5;
            box-shadow: 0 6px 0 #3730a3;
        }
        
        .importi-card-title {
            font-size: 1.1em;
            font-weight: 700;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 2px solid;
        }
        
        .importi-valore {
            font-size: 2em;
            font-weight: 800;
            margin: 15px 0;
            line-height: 1.2;
            word-break: break-word;
        }
        
        @media (max-width: 480px) {
            .importi-valore {
                font-size: 1.8em;
            }
        }
        
        .importi-card-principale .importi-valore {
            color: #0b4f6c;
        }
        
        .importi-card-secondo .importi-valore {
            color: #3730a3;
        }
        
        .novita-2026-box {
            margin-top: 25px;
            padding: 20px;
            background: linear-gradient(145deg, #e1f5fe, #b3e5fc);
            border-radius: 16px;
            border: 2px solid #0288d1;
            color: #01579b;
        }
        
        @media (max-width: 480px) {
            .novita-2026-box {
                padding: 16px;
                margin-top: 20px;
            }
        }
        
        .novita-2026-title {
            color: #01579b;
            font-size: 1.2em;
            font-weight: 800;
            margin-bottom: 16px;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 8px;
            border-bottom: 2px solid #0288d1;
            padding-bottom: 8px;
        }
        
        .novita-2026-list {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }
        
        @media (max-width: 640px) {
            .novita-2026-list {
                grid-template-columns: 1fr;
                gap: 14px;
            }
        }
        
        .novita-item {
            background: white;
            padding: 14px;
            border-radius: 10px;
            border-left: 6px solid #0288d1;
        }
        
        .novita-item strong {
            color: #01579b;
            display: block;
            margin-bottom: 6px;
            font-size: 1em;
        }
        
        .novita-item p {
            margin: 0;
            color: #333;
            font-size: 0.9em;
            line-height: 1.5;
        }
        
        @media (max-width: 480px) {
            .novita-item p {
                font-size: 0.85em;
            }
        }
        
        .disclaimer-completo {
            font-size: 0.8em;
            line-height: 1.5;
            margin-top: 40px;
            padding: 20px;
            background: #fff3cd;
            border-left: 6px solid #ffc107;
            border-radius: 14px;
            color: #856404;
            box-shadow: 0 5px 12px rgba(0,0,0,0.05);
        }
        
        @media (max-width: 480px) {
            .disclaimer-completo {
                margin-top: 30px;
                padding: 16px;
                font-size: 0.75em;
                line-height: 1.4;
            }
        }
        
        .disclaimer-title {
            font-size: 1.1em;
            font-weight: 800;
            color: #533f03;
            margin-bottom: 16px;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-bottom: 2px solid #ffc107;
            padding-bottom: 8px;
        }
        
        .disclaimer-footer {
            font-size: 0.85em;
            text-align: center;
            margin-top: 20px;
            padding-top: 16px;
            border-top: 1px solid #ffc107;
            color: #856404;
        }
        
        hr {
            border: none;
            border-top: 2px solid rgba(255,255,255,0.15);
            margin: 20px 0;
        }
        
        /* Ottimizzazioni per touch */
        button, 
        .button,
        input[type="number"],
        select {
            -webkit-tap-highlight-color: transparent;
        }
        
        /* Migliora leggibilit√† su schermi piccoli */
        @media (max-width: 480px) {
            .container {
                max-width: 100%;
            }
            
            .deduzione-massimale div {
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }
            
            .deduzione-massimale span {
                font-size: 0.95em;
            }
            
            .fondo-attuale-title,
            .secondo-fondo-title,
            .deduzione-title {
                font-size: 1em;
            }
            
            .parametro-input input {
                font-size: 16px; /* Previene zoom iOS */
            }
            
            .parametro-input span {
                padding: 10px 10px;
                font-size: 0.85em;
            }
            
            .badge {
                margin-left: 0;
            }
        }
        
        /* Per schermi molto piccoli */
        @media (max-width: 360px) {
            h1 {
                font-size: 1.2em;
            }
            
            .importi-valore {
                font-size: 1.6em;
            }
            
            .highlight .montante {
                font-size: 1.6em;
            }
            
            .input-group {
                flex-direction: column;
                align-items: stretch;
            }
            
            .input-group span {
                text-align: center;
            }
            
            .default-badge {
                margin-left: 0;
                margin-top: 4px;
            }
        }
        
        /* Stampa */
        @media print {
            body {
                background: white;
                padding: 0;
            }
            
            .container {
                box-shadow: none;
                border: 1px solid #ddd;
            }
            
            .button {
                display: none;
            }
        }
        
        /* Smooth scrolling */
        html {
            scroll-behavior: smooth;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üè¢ STRATEGIA DEL DOPPIO FONDO PENSIONE</h1>
        <div class="subtitle">Calcolatore e Simulatore per Dipendenti iscritti a Fondi pensione Negoziali</div>
        
        <div class="tooltip-info">
            <strong>üìå NOVIT√Ä LEGGE DI BILANCIO 2025:</strong><br>
            ‚Ä¢ <strong>üí∞ Nuovo massimale deducibile: ‚Ç¨5.300 annui</strong> <br>
            ‚Ä¢ <strong>TFR annuo (7,41% RAL)</strong> - Calcolo del Trattamento di Fine Rapporto secondo la normativa<br>
            ‚Ä¢ <strong>Contributo datoriale</strong> - Percentuale della RAL versata dal datore. In termini pratici, rappresenta ‚Äúsoldi gratis‚Äù.<br>
            ‚Ä¢ <strong>Contributo dipendente</strong> - Per ricevere il contributo datoriale √® necessario versare una piccola percentuale a proprio carico.<br>
            ‚Ä¢ <strong>Fondo Pensione attuale</strong> - Capitale gi√† accumulato che verr√† rivalutato<br>
            ‚Ä¢ <strong>Strategia del secondo fondo pensione</strong> - Simulazione per calcolare spazi di deducibilit√† da investire in un secondo fondo pensione<br>
            ‚Ä¢ <strong>Disclaimer</strong> - Strumento esclusivamente informativo e didattico.
        </div>
        
        <div class="grid">
            <!-- PANNELLO INPUT -->
            <div class="input-panel">
                <h2 style="color: #0b4f6c; margin-top: 0; margin-bottom: 20px; font-size: 1.5em;">üìã PARAMETRI</h2>
                
                <!-- ET√Ä ATTUALE - Default 50 -->
                <div class="form-group">
                    <label>üéÇ ET√Ä ATTUALE <span class="default-badge">Default 50</span></label>
                    <input type="number" id="eta" min="18" max="70" value="50" step="1" inputmode="numeric">
                </div>
                
                <!-- ET√Ä PENSIONAMENTO -->
                <div class="form-group">
                    <label>üèÅ ET√Ä PENSIONAMENTO</label>
                    <input type="number" id="etaPensione" min="50" max="75" value="67" step="1" inputmode="numeric">
                    <div style="font-size: 0.8em; color: #666; margin-top: 5px;">
                        Anni di contribuzione: <span id="anniDisplay">17</span> anni
                    </div>
                </div>
                
                <!-- RAL - Default 60.000 -->
                <div class="form-group">
                    <label>üí∞ RAL <span class="default-badge">Default ‚Ç¨60.000</span></label>
                    <div class="input-group">
                        <input type="number" id="ral" min="15000" step="1000" value="60000" inputmode="numeric">
                        <span>‚Ç¨/anno</span>
                    </div>
                </div>
                
                <!-- IMPORTO ATTUALE FONDO PENSIONE - Default 98.000 -->
                <div class="fondo-attuale-box">
                    <div class="fondo-attuale-title">
                        <span>üí∞ FONDO PENSIONE ATTUALE</span>
                        <span class="default-badge" style="background: #e65100;">Default ‚Ç¨98.000</span>
                    </div>
                    <div class="form-group" style="margin-bottom: 0;">
                        <label style="color: #e65100;">IMPORTO GI√Ä ACCUMULATO</label>
                        <div class="input-group">
                            <input type="number" id="fondoAttuale" min="0" step="1000" value="98000" inputmode="numeric">
                            <span>‚Ç¨</span>
                        </div>
                        <div style="font-size: 0.8em; color: #e65100; margin-top: 8px;">
                            ‚ö†Ô∏è Verr√† rivalutato annualmente fino al pensionamento
                        </div>
                    </div>
                </div>
                
                <div class="contributo-box">
                    <h3 style="color: #0b4f6c; margin-top: 0; margin-bottom: 16px; font-size: 1.2em;">üîß CONTRIBUTI</h3>
                    
                    <!-- CONTRIBUTO DATORIALE - Default 1,6% -->
                    <div class="form-group">
                        <label>üè¢ CONTRIBUTO DATORIALE <span class="default-badge">Default 1,6%</span></label>
                        <div class="input-group">
                            <input type="number" id="contributoDatoriale" min="0" max="10" step="0.1" value="1.6" inputmode="decimal">
                            <span>%</span>
                        </div>
                    </div>
                    
                    <!-- CONTRIBUTO DIPENDENTE - Default 1% -->
                    <div class="form-group">
                        <label>üë§ CONTRIBUTO DIPENDENTE <span class="default-badge">Default 1%</span></label>
                        <div class="input-group">
                            <input type="number" id="contributoDipendente" min="0" max="15" step="0.1" value="1" inputmode="decimal">
                            <span>%</span>
                        </div>
                    </div>
                </div>
                
                <!-- PARAMETRI FINANZIARI FONDO PENSIONE PRINCIPALE -->
                <div style="margin-top: 20px;">
                    <div class="form-group">
                        <label>üìà RENDIMENTO (FONDO PRINCIPALE)</label>
                        <select id="rendimento">
                            <option value="1">üõ°Ô∏è Conservativo (1%)</option>
                            <option value="2">‚öñÔ∏è Prudente (2%)</option>
                            <option value="3" selected>üìä Moderato (3%)</option>
                            <option value="4">üìà Dinamico (4%)</option>
                            <option value="6">üöÄ Aggressivo (6%)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>üìâ INFLAZIONE ATTESA</label>
                        <select id="inflazione">
                            <option value="1">üê¢ Bassa (1%)</option>
                            <option value="1.5">‚öñÔ∏è Moderata (1.5%)</option>
                            <option value="2" selected>üìä Media (2%)</option>
                            <option value="2.5">üìà Alta (2.5%)</option>
                        </select>
                    </div>
                </div>
                
                <!-- PARAMETRI STRATEGIA SECONDO FONDO - Default 6% e 10% -->
                <div class="secondo-fondo-box" style="margin-top: 25px;">
                    <div class="secondo-fondo-title">
                        <span>üöÄ SECONDO FONDO PENSIONE</span>
                    </div>
                    
                    <div class="parametri-aggressivo">
                        <div style="font-weight: 700; color: #3730a3; margin-bottom: 12px;">üìä PERSONALIZZA PARAMETRI</div>
                        
                        <div class="parametri-grid">
                            <div class="parametro-item">
                                <span class="parametro-label">Rendimento atteso</span>
                                <div class="parametro-input">
                                    <input type="number" id="rendimentoAggressivo" min="1" max="15" step="0.5" value="6" inputmode="decimal">
                                    <span>%</span>
                                </div>
                                <span class="default-badge" style="background: #4f46e5; margin-left: 0; margin-top: 5px;">Default 6%</span>
                            </div>
                            <div class="parametro-item">
                                <span class="parametro-label">Volatilit√† attesa</span>
                                <div class="parametro-input">
                                    <input type="number" id="volatilitaAggressivo" min="1" max="30" step="0.5" value="10" inputmode="decimal">
                                    <span>%</span>
                                </div>
                                <span class="default-badge" style="background: #4f46e5; margin-left: 0; margin-top: 5px;">Default 10%</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <button onclick="calcolaSimulazione()" class="button">üîÆ CALCOLA PROIEZIONE</button>
            </div>
            
            <!-- PANNELLO RISULTATI FONDO PRINCIPALE -->
            <div class="result-panel" id="risultati">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 8px;">
                    <h2 style="color: white; margin: 0; font-size: 1.5em;">üìä FONDO PRINCIPALE</h2>
                    <span class="badge">Risultati</span>
                </div>
                
                <div id="risultati-content">
                    <!-- I risultati vengono inseriti qui -->
                </div>
            </div>
        </div>
        
        <!-- SEZIONE STRATEGIA DEL SECONDO FONDO PENSIONE IN BASSO -->
        <div class="secondo-fondo-bottom" id="secondoFondoBottom">
            <div class="secondo-fondo-bottom-title">
                <span>üöÄ SECONDO FONDO PENSIONE</span>
            </div>
            
            <!-- TESTO GRANDE COME FUNZIONA -->
            <div class="come-funziona-grande">
                üì¢ Investi la capienza deducibile residua ogni anno in un secondo fondo con profilo di rischio/rendimento diverso dal fondo principale.
                E' possibile anche simulare un investimento  nel secondo fondo con un profilo rischio/rendimento piu' basso del fondo principale. 
                Semplicemnete modifica le ipotesi di rendimento nella casella "secondo fondo pensione". Modifica Rendimento atteso:1,5% e volatilit√†: 1% (cosi simuli un investimento a capitale garantito).
                Vuoi simulare l'andamento di un investimento nell' S&P500 . Modifica rendimento atteso in 12% e volatilita in 14%. Divertiti a Simulare.
            </div>
            
            <div id="secondoFondoContent">
                <!-- I risultati del secondo fondo vengono inseriti qui -->
            </div>
        </div>
        
        <!-- RIQUADRO IMPORTI SIMULATI -->
        <div class="importi-simulati-box" id="importiSimulatiBox">
            <div class="importi-simulati-title">
                <span>üí∞ IMPORTI SIMULATI</span>
                <span class="badge" style="background: #0b4f6c;">al pensionamento</span>
            </div>
            
            <div id="importiSimulatiContent">
                <!-- Contenuto generato dinamicamente -->
            </div>
            
            <!-- NOVIT√Ä 2026 -->
            <div class="novita-2026-box">
                <div class="novita-2026-title">
                    <span>üìå NOVIT√Ä 2026 - CONVERSIONE CAPITALE/RENDITA</span>
                </div>
                <div class="novita-2026-list">
                    <div class="novita-item">
                        <strong>üìä Regola 60/40</strong>
                        <p>Fino al <strong>60% del montante</strong> in unica soluzione, 40% convertito in rendita.</p>
                    </div>
                    <div class="novita-item">
                        <strong>‚è±Ô∏è Rendita a durata definita</strong>
                        <p>Rendita per anni pari alla <strong>vita attesa residua</strong> (tavole ISTAT).</p>
                    </div>
                    <div class="novita-item">
                        <strong>üí≥ Prelievi liberi</strong>
                        <p><strong>Prelievi flessibili</strong> dal fondo, capitale residuo investito.</p>
                    </div>
                    <div class="novita-item">
                        <strong>üìÖ Erogazione frazionata</strong>
                        <p>Recupero capitale in <strong>periodo non inferiore a 5 anni</strong>.</p>
                    </div>
                </div>
                <p style="margin-top: 16px; font-size: 0.85em; font-style: italic; background: white; padding: 12px; border-radius: 8px;">
                    ‚ö†Ô∏è Opzioni alternative. Valutare con un consulente finanziario.
                </p>
            </div>
        </div>
        
        <!-- DISCLAIMER COMPLETO -->
        <div class="disclaimer-completo">
            <div class="disclaimer-title">‚ö†Ô∏è DISCLAIMER LEGALE</div>
            
            <p><strong>1. SCOPO INFORMATIVO E DIDATTICO</strong><br>
            Strumento <strong>esclusivamente a scopo informativo, didattico e illustrativo</strong>. I risultati non costituiscono:</p>
            <ul style="margin-left: 20px; margin-bottom: 12px; padding-left: 0;">
                <li>Consulenza finanziaria personalizzata</li>
                <li>Raccomandazione di investimento</li>
                <li>Consulenza fiscale o previdenziale</li>
                <li>Offerta di prodotti finanziari</li>
            </ul>
            
            <p><strong>2. ASSENZA DI GARANZIE</strong><br>
            I rendimenti passati <strong>NON SONO INDICATIVI</strong> di quelli futuri. Le proiezioni si basano su ipotesi semplificate che <strong>non riflettono la realt√†</strong>.</p>
            
            <p><strong>3. RESPONSABILIT√Ä DELL'UTENTE</strong><br>
            L'utente √® l'<strong>unico responsabile</strong> dei dati inseriti e delle decisioni conseguenti. Lo sviluppatore <strong>NON risponde di perdite o danni</strong>.</p>
            
            <p><strong>4. NORMATIVA VIGENTE</strong><br>
            Parametri: massimale <strong>‚Ç¨5.300</strong> (2025), TFR <strong>7,41% RAL</strong>, tassazione <strong>15-9%</strong>. Normativa soggetta a modifiche.</p>
            
            <p><strong>5. OBBLIGO DI CONSULENZA PROFESSIONALE</strong><br>
            <strong>Prima di qualsiasi decisione, consultare obbligatoriamente un consulente finanziario abilitato.</strong></p>
            
            <p><strong>6. PRIVACY</strong><br>
            <strong>Nessun dato viene raccolto o trasmesso</strong>. Calcoli esclusivamente sul dispositivo dell'utente.</p>
            
            <p><strong>7. NOVIT√Ä 2026</strong><br>
            Le informazioni sulle novit√† 2026 sono <strong>anteprime di possibili evoluzioni normative</strong>.</p>
            
            <div class="disclaimer-footer">
                <strong>¬© 2025-2026 - Strategia del Doppio Fondo Pensione</strong><br>
                Versione 2.0 - Aggiornato Legge Bilancio 2025
            </div>
        </div>
        
    </div>

    <script>
        function calcolaSimulazione() {
            try {
                // ========== RECUPERO VALORI INPUT ==========
                const eta = parseInt(document.getElementById('eta').value);
                const etaPensione = parseInt(document.getElementById('etaPensione').value);
                const ral = parseFloat(document.getElementById('ral').value);
                const fondoAttuale = parseFloat(document.getElementById('fondoAttuale').value) || 0;
                const percDatoriale = parseFloat(document.getElementById('contributoDatoriale').value) / 100;
                const percDipendente = parseFloat(document.getElementById('contributoDipendente').value) / 100;
                const rendimento = parseFloat(document.getElementById('rendimento').value) / 100;
                const inflazione = parseFloat(document.getElementById('inflazione').value) / 100;
                
                // ========== RECUPERO PARAMETRI SECONDO FONDO ==========
                const rendimentoSecondo = parseFloat(document.getElementById('rendimentoAggressivo').value) / 100;
                const volatilitaSecondo = parseFloat(document.getElementById('volatilitaAggressivo').value) / 100;
                
                // ========== VALIDAZIONE ==========
                if (eta >= etaPensione) {
                    alert('L\'et√† di pensionamento deve essere maggiore dell\'et√† attuale');
                    return;
                }
                
                // ========== CALCOLO ANNI CONTRIBUZIONE ==========
                const anniContribuzione = etaPensione - eta;
                document.getElementById('anniDisplay').innerHTML = anniContribuzione;
                
                // ========== CALCOLO TFR CON FORMULA 7,41% RAL ==========
                const TFR_PERCENTUALE = 0.0741;
                const tfrAnnuale = ral * TFR_PERCENTUALE;
                
                // ========== CALCOLO CONTRIBUTI ANNUALI ==========
                const contributoDatorialeAnnuale = ral * percDatoriale;
                const contributoDipendenteAnnuale = ral * percDipendente;
                const contributoAnnualeTotale = tfrAnnuale + contributoDatorialeAnnuale + contributoDipendenteAnnuale;
                
                // ========== CALCOLO DEDUZIONE FISCALE ==========
                const MASSIMALE_DEDUCIBILE = 5300.00;
                const contributoDeducibileAnnuale = contributoDatorialeAnnuale + contributoDipendenteAnnuale;
                const differenzaMassimale = MASSIMALE_DEDUCIBILE - contributoDeducibileAnnuale;
                const contributoEffettivoDeducibile = Math.min(contributoDeducibileAnnuale, MASSIMALE_DEDUCIBILE);
                const eccedenzaNonDeducibile = Math.max(0, contributoDeducibileAnnuale - MASSIMALE_DEDUCIBILE);
                
                // ========== CALCOLO CAPIENZA DEDUCIBILE RESIDUA ==========
                const capienzaResidua = Math.max(0, differenzaMassimale);
                
                // ========== CALCOLO MONTANTE FONDO PRINCIPALE ==========
                let montante = fondoAttuale;
                let totaleContributi = 0;
                
                for(let i = 0; i < anniContribuzione; i++) {
                    montante = montante * (1 + rendimento) + contributoAnnualeTotale;
                    totaleContributi += contributoAnnualeTotale;
                }
                
                const fondoAttualeRivalutato = fondoAttuale * Math.pow(1 + rendimento, anniContribuzione);
                const contributiFuturiRivalutati = montante - fondoAttualeRivalutato;
                
                // ========== CALCOLO STRATEGIA SECONDO FONDO ==========
                let montanteMediano = 0;
                for(let i = 0; i < anniContribuzione; i++) {
                    montanteMediano = montanteMediano * (1 + rendimentoSecondo) + capienzaResidua;
                }
                
                let montanteOttimistico = 0;
                const rendimentoOttimistico = rendimentoSecondo + volatilitaSecondo;
                for(let i = 0; i < anniContribuzione; i++) {
                    montanteOttimistico = montanteOttimistico * (1 + rendimentoOttimistico) + capienzaResidua;
                }
                
                let montantePessimistico = 0;
                const rendimentoPessimistico = Math.max(-0.99, rendimentoSecondo - volatilitaSecondo);
                for(let i = 0; i < anniContribuzione; i++) {
                    montantePessimistico = montantePessimistico * (1 + rendimentoPessimistico) + capienzaResidua;
                }
                
                const totaleVersamentiSecondoFondo = capienzaResidua * anniContribuzione;
                
                const ALIQUOTA_RISPARMIO = 0.43;
                const risparmioFiscaleAnnualeSecondo = capienzaResidua * ALIQUOTA_RISPARMIO;
                const risparmioFiscaleTotaleSecondo = risparmioFiscaleAnnualeSecondo * anniContribuzione;
                
                const versamentiNettoRisparmio = totaleVersamentiSecondoFondo - risparmioFiscaleTotaleSecondo;
                
                const montanteReale = montante / Math.pow(1 + inflazione, anniContribuzione);
                const renditaAnnua = montante * 0.04;
                
                // ========== TASSAZIONE AGEVOLATA FONDO PRINCIPALE ==========
                const anniPermanenza = anniContribuzione;
                let aliquotaTassazione;
                if (anniPermanenza < 15) aliquotaTassazione = 15;
                else if (anniPermanenza < 20) aliquotaTassazione = 13;
                else if (anniPermanenza < 25) aliquotaTassazione = 12;
                else if (anniPermanenza < 30) aliquotaTassazione = 11;
                else if (anniPermanenza < 35) aliquotaTassazione = 10;
                else aliquotaTassazione = 9;
                
                const tassazioneAgevolata = montante * (aliquotaTassazione / 100) * 0.5;
                const montanteNetto = montante - tassazioneAgevolata;
                
                // ========== RISPARMIO FISCALE FONDO PRINCIPALE ==========
                let aliquotaIrpef;
                if (ral < 28000) aliquotaIrpef = 0.23;
                else if (ral < 50000) aliquotaIrpef = 0.35;
                else aliquotaIrpef = 0.43;
                
                const risparmioFiscaleAnnualePrincipale = contributoEffettivoDeducibile * aliquotaIrpef;
                const risparmioFiscaleTotalePrincipale = risparmioFiscaleAnnualePrincipale * anniContribuzione;
                
                // ========== GENERAZIONE HTML RISULTATI FONDO PRINCIPALE ==========
                document.getElementById('risultati-content').innerHTML = `
                    <div class="highlight">
                        <div style="font-size: 0.9em; margin-bottom: 5px; text-transform: uppercase;">MONTANTE FINALE</div>
                        <div class="montante">‚Ç¨ ${formatNumber(montante)}</div>
                        <div style="opacity: 0.9; margin-top: 8px;">Dopo ${anniContribuzione} anni</div>
                    </div>
                    
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 12px; margin-bottom: 20px;">
                        <h4 style="color: white; margin-top: 0; margin-bottom: 12px; text-align: center; font-size: 1em;">üìä RIPARTIZIONE CAPITALE</h4>
                        <div class="capitale-ripartizione">
                            <div class="capitale-box">
                                <div class="capitale-label">Fondo attuale rivalutato</div>
                                <div class="capitale-valore">‚Ç¨ ${formatNumber(fondoAttualeRivalutato)}</div>
                                <div style="font-size: 0.7em;">+${((fondoAttualeRivalutato/fondoAttuale - 1)*100).toFixed(1)}%</div>
                            </div>
                            <div class="capitale-box">
                                <div class="capitale-label">Contributi + rendimenti</div>
                                <div class="capitale-valore">‚Ç¨ ${formatNumber(contributiFuturiRivalutati)}</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="deduzione-box">
                        <div class="deduzione-title">
                            <span>üí∞ DEDUZIONE FISCALE</span>
                            <span style="font-size: 0.7rem; background: #0b4f6c; color: white; padding: 3px 10px; border-radius: 30px;">ESCLUSO TFR</span>
                        </div>
                        <div class="deduzione-row">
                            <span class="deduzione-label">üè¢ Contributo datoriale:</span>
                            <span class="deduzione-importo">‚Ç¨ ${formatNumber(contributoDatorialeAnnuale)}</span>
                        </div>
                        <div class="deduzione-row">
                            <span class="deduzione-label">üë§ Contributo dipendente:</span>
                            <span class="deduzione-importo">‚Ç¨ ${formatNumber(contributoDipendenteAnnuale)}</span>
                        </div>
                        <div class="deduzione-row" style="border-bottom: 2px solid #0b4f6c;">
                            <span class="deduzione-label" style="font-weight: 800;">TOTALE DEDUCIBILE:</span>
                            <span class="deduzione-importo" style="font-size: 1.2em;">‚Ç¨ ${formatNumber(contributoDeducibileAnnuale)}</span>
                        </div>
                        
                        <div class="deduzione-massimale">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span style="font-weight: 700;">üìå Massimale 2025:</span>
                                <span style="font-size: 1.2em; font-weight: 800;">‚Ç¨ 5.300</span>
                            </div>
                        </div>
                        
                        <div class="deduzione-differenza">
                            <span style="font-weight: 600;">DIFFERENZA:</span>
                            ${differenzaMassimale >= 0 ? 
                                `<span class="differenza-positiva">+ ‚Ç¨ ${formatNumber(differenzaMassimale)}</span>` : 
                                `<span class="differenza-negativa">- ‚Ç¨ ${formatNumber(Math.abs(differenzaMassimale))}</span>`
                            }
                        </div>
                        
                        ${eccedenzaNonDeducibile > 0 ? 
                            `<div style="background: #ffc107; color: #0b4f6c; padding: 12px; border-radius: 8px; margin-top: 12px; text-align: center; font-size: 0.9em;">
                                ‚ö†Ô∏è Eccedenza non deducibile: ‚Ç¨ ${formatNumber(eccedenzaNonDeducibile)}/anno
                            </div>` : 
                            `<div style="background: #28a745; color: white; padding: 12px; border-radius: 8px; margin-top: 12px; text-align: center; font-size: 0.9em;">
                                ‚úÖ Capienza residua: ‚Ç¨ ${formatNumber(capienzaResidua)}/anno
                            </div>`
                        }
                        
                        <div style="margin-top: 12px; font-size: 0.85em; background: rgba(255,255,255,0.7); padding: 10px; border-radius: 8px;">
                            <strong>üí° RISPARMIO FISCALE:</strong> ‚Ç¨ ${formatNumber(risparmioFiscaleAnnualePrincipale)}/anno (IRPEF ${(aliquotaIrpef*100).toFixed(0)}%)
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <div class="result-item">
                            <span>üí∞ Montante netto:</span>
                            <span class="result-value">‚Ç¨ ${formatNumber(montanteNetto)}</span>
                        </div>
                        <div class="result-item">
                            <span>üìä Montante reale:</span>
                            <span class="result-value">‚Ç¨ ${formatNumber(montanteReale)}</span>
                        </div>
                        <div class="result-item">
                            <span>üí∂ Rendita annua:</span>
                            <span class="result-value">‚Ç¨ ${formatNumber(renditaAnnua)}/anno</span>
                        </div>
                    </div>
                    
                    <hr>
                    
                    <h3 style="color: white; margin: 0 0 12px 0; font-size: 1.1em;">üì¶ CONTRIBUTI ANNUALI</h3>
                    
                    <div class="result-item">
                        <span>üè¢ Contributo datoriale:</span>
                        <span class="result-value">‚Ç¨ ${formatNumber(contributoDatorialeAnnuale)}/anno</span>
                    </div>
                    <div class="result-item">
                        <span>üë§ Contributo dipendente:</span>
                        <span class="result-value">‚Ç¨ ${formatNumber(contributoDipendenteAnnuale)}/anno</span>
                    </div>
                    <div class="result-item">
                        <span>üì¶ Quota TFR:</span>
                        <span class="result-value">‚Ç¨ ${formatNumber(tfrAnnuale)}/anno</span>
                    </div>
                    <div class="result-item" style="border-bottom: 2px solid rgba(255,255,255,0.3);">
                        <span><strong>TOTALE:</strong></span>
                        <span style="font-size: 1.3em; color: #ffd966; font-weight: 700;">‚Ç¨ ${formatNumber(contributoAnnualeTotale)}</span>
                    </div>
                    
                    <div style="background: rgba(255,255,255,0.1); padding: 12px; border-radius: 10px; margin-top: 12px;">
                        <div style="display: flex; justify-content: space-between;">
                            <span>üìä Totale contributi:</span>
                            <span style="font-weight: 700;">‚Ç¨ ${formatNumber(totaleContributi)}</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-top: 6px;">
                            <span>üìà Guadagno rendimenti:</span>
                            <span style="font-weight: 700; color: #a8e6cf;">‚Ç¨ ${formatNumber(contributiFuturiRivalutati - totaleContributi)}</span>
                        </div>
                    </div>
                `;
                
                // ========== GENERAZIONE HTML STRATEGIA SECONDO FONDO ==========
                document.getElementById('secondoFondoContent').innerHTML = `
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div style="background: white; padding: 20px; border-radius: 16px; border: 2px solid #4f46e5; box-shadow: 0 6px 0 #3730a3;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; flex-wrap: wrap; gap: 8px;">
                                <span style="font-weight: 800; color: #3730a3; font-size: 1.2em;">üìä PARAMETRI</span>
                                <span style="background: #4f46e5; color: white; padding: 4px 12px; border-radius: 30px; font-size: 0.75em;">Personalizzati</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                                <span style="color: #4b5563;">Rendimento:</span>
                                <span style="font-weight: 700; color: #3730a3;">${(rendimentoSecondo*100).toFixed(1)}%</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                                <span style="color: #4b5563;">Volatilit√†:</span>
                                <span style="font-weight: 700; color: #3730a3;">${(volatilitaSecondo*100).toFixed(1)}%</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                                <span style="color: #4b5563;">Investimento/anno:</span>
                                <span style="font-weight: 700; color: #3730a3;">‚Ç¨ ${formatNumber(capienzaResidua)}</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 12px; padding-top: 12px; border-top: 2px solid #e0e7ff;">
                                <span style="color: #4b5563;">Totale versamenti:</span>
                                <span style="font-weight: 800; color: #3730a3; font-size: 1.1em;">‚Ç¨ ${formatNumber(totaleVersamentiSecondoFondo)}</span>
                            </div>
                            
                            <div style="background: linear-gradient(145deg, #e0e7ff, #c7d2fe); padding: 12px; border-radius: 10px; margin: 12px 0;">
                                <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 5px;">
                                    <span style="font-weight: 700; color: #3730a3; font-size: 0.9em;">VERSAMENTI NETTO:</span>
                                    <span style="font-size: 1.2em; font-weight: 800; color: #3730a3;">‚Ç¨ ${formatNumber(versamentiNettoRisparmio)}</span>
                                </div>
                            </div>
                            
                            <div style="background: #fef9e7; padding: 12px; border-radius: 10px; border: 2px solid #d97706;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 6px;">
                                    <span style="color: #92400e; font-size: 0.9em;">Risparmio fiscale/anno:</span>
                                    <span style="font-weight: 800; color: #92400e;">‚Ç¨ ${formatNumber(risparmioFiscaleAnnualeSecondo)}</span>
                                </div>
                                <div style="display: flex; justify-content: space-between;">
                                    <span style="color: #92400e; font-size: 0.9em;">Risparmio fiscale totale:</span>
                                    <span style="font-weight: 800; color: #92400e;">‚Ç¨ ${formatNumber(risparmioFiscaleTotaleSecondo)}</span>
                                </div>
                            </div>
                        </div>
                        
                        <div style="background: white; padding: 20px; border-radius: 16px; border: 2px solid #4f46e5; box-shadow: 0 6px 0 #3730a3;">
                            <div style="text-align: center; margin-bottom: 16px;">
                                <span style="font-weight: 800; color: #3730a3; font-size: 1.2em;">üìà MONTANTI</span>
                            </div>
                            
                            <div style="text-align: center; padding: 16px; background: linear-gradient(145deg, #e0e7ff, #c7d2fe); border-radius: 12px; margin-bottom: 16px;">
                                <div style="font-size: 0.8em; color: #3730a3; text-transform: uppercase;">MONTANTE MEDIANO</div>
                                <div style="font-size: 2em; font-weight: 800; color: #3730a3; margin: 8px 0;">‚Ç¨ ${formatNumber(montanteMediano)}</div>
                                <div style="font-size: 0.75em;">Dopo ${anniContribuzione} anni</div>
                            </div>
                            
                            <div class="scenari-grid">
                                <div class="scenario-box scenario-ottimistico">
                                    <div class="scenario-label">OTTIMISTICO</div>
                                    <div class="scenario-valore">‚Ç¨ ${formatNumber(montanteOttimistico)}</div>
                                </div>
                                <div class="scenario-box scenario-pessimistico">
                                    <div class="scenario-label">PESSIMISTICO</div>
                                    <div class="scenario-valore">‚Ç¨ ${formatNumber(montantePessimistico)}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                // ========== GENERAZIONE HTML IMPORTI SIMULATI ==========
                document.getElementById('importiSimulatiContent').innerHTML = `
                    <div class="importi-grid">
                        <div class="importi-card importi-card-principale">
                            <div class="importi-card-title">
                                üè¶ FONDO PRINCIPALE
                            </div>
                            <div class="importi-valore">
                                ‚Ç¨ ${formatNumber(montante)}
                            </div>
                            <div class="importi-label">
                                Montante finale
                            </div>
                        </div>
                        
                        <div class="importi-card importi-card-secondo">
                            <div class="importi-card-title">
                                üöÄ SECONDO FONDO
                            </div>
                            <div class="importi-valore">
                                ‚Ç¨ ${formatNumber(montanteMediano)}
                            </div>
                            <div class="importi-label">
                                Montante mediano
                            </div>
                        </div>
                    </div>
                    <div style="text-align: center; margin-top: 16px; padding: 12px; background: #f8f9fa; border-radius: 10px; font-size: 0.95em;">
                        <strong>üí∞ CAPITALE COMPLESSIVO:</strong> ‚Ç¨ ${formatNumber(montante + montanteMediano)}
                    </div>
                `;
                
            } catch (error) {
                console.error('Errore:', error);
                alert('Errore nel calcolo. Verifica i valori inseriti.');
            }
        }
        
        function formatNumber(num) {
            if (isNaN(num) || num === Infinity || num === -Infinity) return '0';
            return Math.round(num).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
        }
        
        // Event listeners
        document.getElementById('eta').addEventListener('change', calcolaSimulazione);
        document.getElementById('etaPensione').addEventListener('change', function() {
            const eta = parseInt(document.getElementById('eta').value);
            const etaPensione = parseInt(this.value);
            document.getElementById('anniDisplay').innerHTML = Math.max(0, etaPensione - eta);
            calcolaSimulazione();
        });
        document.getElementById('ral').addEventListener('change', calcolaSimulazione);
        document.getElementById('fondoAttuale').addEventListener('change', calcolaSimulazione);
        document.getElementById('contributoDatoriale').addEventListener('change', calcolaSimulazione);
        document.getElementById('contributoDipendente').addEventListener('change', calcolaSimulazione);
        document.getElementById('rendimento').addEventListener('change', calcolaSimulazione);
        document.getElementById('inflazione').addEventListener('change', calcolaSimulazione);
        document.getElementById('rendimentoAggressivo').addEventListener('change', calcolaSimulazione);
        document.getElementById('volatilitaAggressivo').addEventListener('change', calcolaSimulazione);
        
        window.onload = calcolaSimulazione;
    </script>
</body>
</html>
